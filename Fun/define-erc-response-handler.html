---
title: "define-erc-response-handler"
layout: doc
---
<strong>define-erc-response-handler</strong> is a Lisp macro in `<code>erc-backend.el</code>'.</br>
</br>
(define-erc-response-handler (<u>NAME</u> &rest <u>ALIASES</u>) &optional <u>EXTRA-FN-DOC</u> <u>EXTRA-VAR-DOC</u> &rest <u>FN-BODY</u>)</br>
</br>
Define an ERC handler hook/function pair.</br>
<u>NAME</u> is the response name as sent by the server (see the IRC RFC for</br>
meanings).</br>
</br>
This creates:</br>
 - a hook variable `erc-server-<u>NAME</u>-functions' initialized to `erc-server-<u>NAME</u>'.</br>
 - a function `erc-server-<u>NAME</u>' with body <u>FN-BODY</u>.</br>
</br>
If <u>ALIASES</u> is non-nil, each alias in <u>ALIASES</u> is `defalias'ed to</br>
`erc-server-<u>NAME</u>'.</br>
Alias hook variables are created as `erc-server-ALIAS-functions' and</br>
initialized to the same default value as `erc-server-<u>NAME</u>-functions'.</br>
</br>
<u>FN-BODY</u> is the body of `erc-server-<u>NAME</u>' it may refer to the two</br>
function arguments PROC and PARSED.</br>
</br>
If <u>EXTRA-FN-DOC</u> is non-nil, it is inserted at the beginning of the</br>
defined function's docstring.</br>
</br>
If <u>EXTRA-VAR-DOC</u> is non-nil, it is inserted at the beginning of the</br>
defined variable's docstring.</br>
</br>
As an example:</br>
</br>
  (define-erc-response-handler (311 WHOIS WI)</br>
    "Some non-generic function documentation."</br>
    "Some non-generic variable documentation."</br>
    (do-stuff-with-whois proc parsed))</br>
</br>
Would expand to:</br>
</br>
  (prog2</br>
      (defvar erc-server-311-functions 'erc-server-311</br>
        "Some non-generic variable documentation.</br>
</br>
  Hook called upon receiving a 311 server response.</br>
  Each function is called with two arguments, the process associated</br>
  with the response and the parsed response.</br>
  See also `erc-server-311'.")</br>
</br>
      (defun erc-server-311 (proc parsed)</br>
        "Some non-generic function documentation.</br>
</br>
  Handler for a 311 server response.</br>
  PROC is the server process which returned the response.</br>
  PARSED is the actual response as an `erc-response' struct.</br>
  If you want to add responses don't modify this function, but rather</br>
  add things to `erc-server-311-functions' instead."</br>
        (do-stuff-with-whois proc parsed))</br>
</br>
    (puthash "311" 'erc-server-311-functions erc-server-responses)</br>
    (puthash "WHOIS" 'erc-server-WHOIS-functions erc-server-responses)</br>
    (puthash "WI" 'erc-server-WI-functions erc-server-responses)</br>
</br>
    (defalias 'erc-server-WHOIS 'erc-server-311)</br>
    (defvar erc-server-WHOIS-functions 'erc-server-311</br>
      "Some non-generic variable documentation.</br>
</br>
  Hook called upon receiving a WHOIS server response.</br>
</br>
  Each function is called with two arguments, the process associated</br>
  with the response and the parsed response.  If the function returns</br>
  non-nil, stop processing the hook.  Otherwise, continue.</br>
</br>
  See also `erc-server-311'.")</br>
</br>
    (defalias 'erc-server-WI 'erc-server-311)</br>
    (defvar erc-server-WI-functions 'erc-server-311</br>
      "Some non-generic variable documentation.</br>
</br>
  Hook called upon receiving a WI server response.</br>
  Each function is called with two arguments, the process associated</br>
  with the response and the parsed response.  If the function returns</br>
  non-nil, stop processing the hook.  Otherwise, continue.</br>
</br>
  See also `erc-server-311'."))
