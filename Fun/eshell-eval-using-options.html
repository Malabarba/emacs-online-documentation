<strong>eshell-eval-using-options</strong> is a Lisp macro in `<code>esh-opt.el</code>'.<br/>
<br/>
(eshell-eval-using-options NAME MACRO-ARGS OPTIONS &rest BODY-FORMS)<br/>
<br/>
Process NAME's MACRO-ARGS using a set of command line OPTIONS.<br/>
After doing so, stores settings in local symbols as declared by OPTIONS;<br/>
then evaluates BODY-FORMS -- assuming all was OK.<br/>
<br/>
OPTIONS is a list, beginning with one or more elements of the form:<br/>
(SHORT LONG VALUE SYMBOL HELP-STRING)<br/>
Each of these elements represents a particular command-line switch.<br/>
<br/>
SHORT is either nil, or a character that can be used as a switch -SHORT.<br/>
LONG is either nil, or a string that can be used as a switch --LONG.<br/>
At least one of SHORT and LONG must be non-nil.<br/>
VALUE is the value associated with the option.  It can be either:<br/>
  t   - the option needs a value to be specified after the switch;<br/>
  nil - the option is given the value t;<br/>
  anything else - specifies the actual value for the option.<br/>
SYMBOL is either nil, or the name of the Lisp symbol that will be bound<br/>
to VALUE.  A nil SYMBOL calls `eshell-show-usage', and so is appropriate<br/>
for a "--help" type option.<br/>
HELP-STRING is a documentation string for the option.<br/>
<br/>
Any remaining elements of OPTIONS are :KEYWORD arguments.  Some take<br/>
arguments, some do not.  The recognized :KEYWORDS are:<br/>
<br/>
:external STRING<br/>
  STRING is an external command to run if there are unknown switches.<br/>
<br/>
:usage STRING<br/>
  STRING is the initial part of the command's documentation string.<br/>
  It appears before the options are listed.<br/>
<br/>
:post-usage STRING<br/>
  STRING is an optional trailing part of the command's documentation string.<br/>
  It appears after the options, but before the final part of the<br/>
  documentation about the associated external command (if there is one).<br/>
<br/>
:show-usage<br/>
  If present, then show the usage message if the command is called with no<br/>
  arguments.<br/>
<br/>
:preserve-args<br/>
  If present, do not pass MACRO-ARGS through `eshell-flatten-list'<br/>
and `eshell-stringify-list'.<br/>
<br/>
For example, OPTIONS might look like:<br/>
<br/>
  '((?C  nil         nil multi-column    "multi-column display")<br/>
    (nil "help"      nil nil             "show this usage display")<br/>
    (?r  "reverse"   nil reverse-list    "reverse order while sorting")<br/>
    :external "ls"<br/>
    :usage "[OPTION]... [FILE]...<br/>
  List information about the FILEs (the current directory by default).<br/>
  Sort entries alphabetically across.")<br/>
<br/>
`eshell-eval-using-options' returns the value of the last form in<br/>
BODY-FORMS.  If instead an external command is run (because of<br/>
an unknown option), the tag `eshell-external' will be thrown with<br/>
the new process for its value.<br/>
<br/>
Lastly, any remaining arguments will be available in a locally<br/>
interned variable `args' (created using a `let' form).