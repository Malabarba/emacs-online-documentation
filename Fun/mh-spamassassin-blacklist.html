<strong>mh-spamassassin-blacklist</strong> is an autoloaded compiled Lisp function in `<code>mh-junk.el</code>'.<br/>
<br/>
(mh-spamassassin-blacklist MSG)<br/>
<br/>
Blacklist MSG with SpamAssassin.<br/>
<br/>
SpamAssassin is one of the more popular spam filtering programs.<br/>
Get it from your local distribution or from the SpamAssassin web<br/>
site at URL `http://spamassassin.org/'.<br/>
<br/>
To use SpamAssassin, add the following recipes to<br/>
".procmailrc":<br/>
<br/>
    PATH=$PATH:/usr/bin/mh<br/>
    MAILDIR=$HOME/`mhparam Path`<br/>
<br/>
    # Fight spam with SpamAssassin.<br/>
    :0fw<br/>
    | spamc<br/>
<br/>
    # Anything with a spam level of 10 or more is junked immediately.<br/>
    :0:<br/>
    * ^X-Spam-Level: ..........<br/>
    /dev/null<br/>
<br/>
    :0:<br/>
    * ^X-Spam-Status: Yes<br/>
    spam/.<br/>
<br/>
If you don't use "spamc", use "spamassassin -P -a".<br/>
<br/>
Note that one of the recipes above throws away messages with a<br/>
score greater than or equal to 10. Here's how you can determine a<br/>
value that works best for you.<br/>
<br/>
First, run "spamassassin -t" on every mail message in your<br/>
archive and use Gnumeric to verify that the average plus the<br/>
standard deviation of good mail is under 5, the SpamAssassin<br/>
default for "spam".<br/>
<br/>
Using Gnumeric, sort the messages by score and view the messages<br/>
with the highest score. Determine the score which encompasses all<br/>
of your interesting messages and add a couple of points to be<br/>
conservative. Add that many dots to the "X-Spam-Level:" header<br/>
field above to send messages with that score down the drain.<br/>
<br/>
In the example above, messages with a score of 5-9 are set aside<br/>
in the "+spam" folder for later review. The major weakness of<br/>
rules-based filters is a plethora of false positives so it is<br/>
worthwhile to check.<br/>
<br/>
If SpamAssassin classifies a message incorrectly, or is unsure,<br/>
you can use the MH-E commands M-x mh-junk-blacklist and<br/>
M-x mh-junk-whitelist.<br/>
<br/>
The command M-x mh-junk-blacklist adds a "blacklist_from" entry<br/>
to "~/spamassassin/user_prefs", deletes the message, and sends<br/>
the message to the Razor, so that others might not see this spam.<br/>
If the "sa-learn" command is available, the message is also<br/>
recategorized as spam.<br/>
<br/>
The command M-x mh-junk-whitelist adds a "whitelist_from" rule<br/>
to the "~/.spamassassin/user_prefs" file. If the "sa-learn"<br/>
command is available, the message is also recategorized as ham.<br/>
<br/>
Over time, you'll observe that the same host or domain occurs<br/>
repeatedly in the "blacklist_from" entries, so you might think<br/>
that you could avoid future spam by blacklisting all mail from a<br/>
particular domain. The utility function<br/>
`mh-spamassassin-identify-spammers' helps you do precisely that.<br/>
This function displays a frequency count of the hosts and domains<br/>
in the "blacklist_from" entries from the last blank line in<br/>
"~/.spamassassin/user_prefs" to the end of the file. This<br/>
information can be used so that you can replace multiple<br/>
"blacklist_from" entries with a single wildcard entry such as:<br/>
<br/>
    blacklist_from *@*amazingoffersdirect2u.com<br/>
<br/>
In versions of SpamAssassin (2.50 and on) that support a Bayesian<br/>
classifier, M-x mh-junk-blacklist uses the program "sa-learn"<br/>
to recategorize the message as spam. Neither MH-E, nor<br/>
SpamAssassin, rebuilds the database after adding words, so you<br/>
will need to run "sa-learn --rebuild" periodically. This can be<br/>
done by adding the following to your crontab:<br/>
<br/>
    0 * * * *   sa-learn --rebuild > /dev/null 2>&1