---
title: "shell-mode"
layout: doc
---
<strong>shell-mode</strong> is an interactive compiled Lisp function in `<code>shell.el</code>'.</br>
</br>
</br>
(shell-mode)</br>
</br>
Parent mode: `comint-mode'.</br>
</br>
Major mode for interacting with an inferior shell.</br>
RET after the end of the process' output sends the text from</br>
    the end of process to the end of the current line.</br>
RET before end of process output copies the current line minus the prompt to</br>
    the end of the buffer and sends it (C-c RET just copies the current line).</br>
M-x send-invisible reads a line of text without echoing it, and sends it to</br>
    the shell.  This is useful for entering passwords.  Or, add the function</br>
    `comint-watch-for-password-prompt' to `comint-output-filter-functions'.</br>
</br>
If you want to make multiple shell buffers, rename the `*shell*' buffer</br>
using M-x rename-buffer or M-x rename-uniquely and start a new shell.</br>
</br>
If you want to make shell buffers limited in length, add the function</br>
`comint-truncate-buffer' to `comint-output-filter-functions'.</br>
</br>
If you accidentally suspend your process, use M-x comint-continue-subjob</br>
to continue it.</br>
</br>
`cd', `pushd' and `popd' commands given to the shell are watched by Emacs to</br>
keep this buffer's default directory the same as the shell's working directory.</br>
While directory tracking is enabled, the shell's working directory is displayed</br>
by C-x C-b or &lt;C-down-mouse-1> in the `File' field.</br>
M-x dirs queries the shell and resyncs Emacs's idea of what the current</br>
    directory stack is.</br>
M-x shell-dirtrack-mode turns directory tracking on and off.</br>
(The `dirtrack' package provides an alternative implementation of this</br>
feature - see the function `dirtrack-mode'.)</br>
</br>
key             binding</br>
---             -------</br>
</br>
C-c		Prefix Command</br>
C-d		comint-delchar-or-maybe-eof</br>
TAB		completion-at-point</br>
C-j		kermit-send-input-cr</br>
RET		comint-send-input</br>
ESC		Prefix Command</br>
C-\		kermit-esc</br>
&lt;C-down>	comint-next-input</br>
&lt;C-up>		comint-previous-input</br>
&lt;delete>	delete-forward-char</br>
&lt;kp-delete>	delete-forward-char</br>
&lt;mouse-2>	comint-insert-input</br>
</br>
M-RET		shell-resync-dirs</br>
M-?		comint-dynamic-list-filename-completions</br>
</br>
C-c C-b		shell-backward-command</br>
C-c C-f		shell-forward-command</br>
C-c C-q		kermit-send-char</br>
C-c \		kermit-esc</br>
</br>
C-c C-a		comint-bol-or-process-mark</br>
C-c C-c		comint-interrupt-subjob</br>
C-c C-d		comint-send-eof</br>
C-c C-e		comint-show-maximum-output</br>
C-c C-l		comint-dynamic-list-input-ring</br>
C-c RET		comint-copy-old-input</br>
C-c C-n		comint-next-prompt</br>
C-c C-o		comint-delete-output</br>
C-c C-p		comint-previous-prompt</br>
C-c C-r		comint-show-output</br>
C-c C-s		comint-write-output</br>
C-c C-u		comint-kill-input</br>
C-c C-w		backward-kill-word</br>
C-c C-x		comint-get-next-from-history</br>
C-c C-z		comint-stop-subjob</br>
C-c ESC		Prefix Command</br>
C-c C-\		comint-quit-subjob</br>
C-c SPC		comint-accumulate</br>
C-c .		comint-insert-previous-argument</br>
</br>
C-M-l		comint-show-output</br>
M-n		comint-next-input</br>
M-p		comint-previous-input</br>
M-r		comint-history-isearch-backward-regexp</br>
</br>
C-c M-r		comint-previous-matching-input-from-input</br>
C-c M-s		comint-next-matching-input-from-input</br>
</br>
</br>
Customization: Entry to this mode runs the hooks on `comint-mode-hook' and</br>
`shell-mode-hook' (in that order).  Before each input, the hooks on</br>
`comint-input-filter-functions' are run.  After each shell output, the hooks</br>
on `comint-output-filter-functions' are run.</br>
</br>
Variables `shell-cd-regexp', `shell-chdrive-regexp', `shell-pushd-regexp'</br>
and `shell-popd-regexp' are used to match their respective commands,</br>
while `shell-pushd-tohome', `shell-pushd-dextract' and `shell-pushd-dunique'</br>
control the behavior of the relevant command.</br>
</br>
Variables `comint-completion-autolist', `comint-completion-addsuffix',</br>
`comint-completion-recexact' and `comint-completion-fignore' control the</br>
behavior of file name, command name and variable name completion.  Variable</br>
`shell-completion-execonly' controls the behavior of command name completion.</br>
Variable `shell-completion-fignore' is used to initialize the value of</br>
`comint-completion-fignore'.</br>
</br>
Variables `comint-input-ring-file-name' and `comint-input-autoexpand' control</br>
the initialization of the input ring history, and history expansion.</br>
</br>
Variables `comint-output-filter-functions', a hook, and</br>
`comint-scroll-to-bottom-on-input' and `comint-scroll-to-bottom-on-output'</br>
control whether input and output cause the window to scroll to the end of the</br>
buffer.
