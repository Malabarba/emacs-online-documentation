<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us"><head><style type="text/css"> @import url('http://www.gnu.org/software/emacs/manual.css');</style></head><body style="padding:1rem;"><strong>with-output-to-temp-buffer</strong> is a Lisp macro in `<code>subr.el</code>'.</br>
</br>
(with-output-to-temp-buffer <u>BUFNAME</u> &rest <u>BODY</u>)</br>
</br>
Bind `standard-output' to buffer <u>BUFNAME</u>, eval <u>BODY</u>, then show that buffer.</br>
</br>
This construct makes buffer <u>BUFNAME</u> empty before running <u>BODY</u>.</br>
It does not make the buffer current for <u>BODY</u>.</br>
Instead it binds `standard-output' to that buffer, so that output</br>
generated with `prin1' and similar functions in <u>BODY</u> goes into</br>
the buffer.</br>
</br>
At the end of <u>BODY</u>, this marks buffer <u>BUFNAME</u> unmodified and displays</br>
it in a window, but does not select it.  The normal way to do this is</br>
by calling `display-buffer', then running `temp-buffer-show-hook'.</br>
However, if `temp-buffer-show-function' is non-nil, it calls that</br>
function instead (and does not run `temp-buffer-show-hook').  The</br>
function gets one argument, the buffer to display.</br>
</br>
The return value of `with-output-to-temp-buffer' is the value of the</br>
last form in <u>BODY</u>.  If <u>BODY</u> does not finish normally, the buffer</br>
<u>BUFNAME</u> is not displayed.</br>
</br>
This runs the hook `temp-buffer-setup-hook' before <u>BODY</u>,</br>
with the buffer <u>BUFNAME</u> temporarily current.  It runs the hook</br>
`temp-buffer-show-hook' after displaying buffer <u>BUFNAME</u>, with that</br>
buffer temporarily current, and the window that was used to display it</br>
temporarily selected.  But it doesn't run `temp-buffer-show-hook'</br>
if it uses `temp-buffer-show-function'.</br>
</br>
By default, the setup hook puts the buffer into Help mode before running <u>BODY</u>.</br>
If <u>BODY</u> does not change the major mode, the show hook makes the buffer</br>
read-only, and scans it for function and variable names to make them into</br>
clickable cross-references.</br>
</br>
See the related form `with-temp-buffer-window'.<br/><br/><br/><br/><small>A courtesy of <a href="http://endlessparentheses.com/">Endless Parentheses</a>.</small></body></html>
