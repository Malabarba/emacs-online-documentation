---
title: "with-temp-buffer-window"
layout: doc
---
<strong>with-temp-buffer-window</strong> is a Lisp macro in `<code>window.el</code>'.</br>
</br>
(with-temp-buffer-window <u>BUFFER-OR-NAME</u> <u>ACTION</u> <u>QUIT-FUNCTION</u> &rest <u>BODY</u>)</br>
</br>
Bind `standard-output' to <u>BUFFER-OR-NAME</u>, eval <u>BODY</u>, show the buffer.</br>
<u>BUFFER-OR-NAME</u> must specify either a live buffer, or the name of</br>
a buffer (if it does not exist, this macro creates it).</br>
</br>
Make the buffer specified by <u>BUFFER-OR-NAME</u> empty before running</br>
<u>BODY</u> and bind `standard-output' to that buffer, so that output</br>
generated with `prin1' and similar functions in <u>BODY</u> goes into</br>
that buffer.  Do not make that buffer current for running the</br>
forms in <u>BODY</u>.  Use `with-current-buffer-window' instead if you</br>
need to run <u>BODY</u> with that buffer current.</br>
</br>
At the end of <u>BODY</u>, mark the specified buffer unmodified and</br>
read-only, and display it in a window (but do not select it).</br>
The display happens by calling `display-buffer' passing it the</br>
<u>ACTION</u> argument.  If `temp-buffer-resize-mode' is enabled, the</br>
corresponding window may be resized automatically.</br>
</br>
Return the value returned by <u>BODY</u>, unless <u>QUIT-FUNCTION</u> specifies</br>
a function.  In that case, run that function with two arguments -</br>
the window showing the specified buffer and the value returned by</br>
<u>BODY</u> - and return the value returned by that function.</br>
</br>
If the buffer is displayed on a new frame, the window manager may</br>
decide to select that frame.  In that case, it's usually a good</br>
strategy if <u>QUIT-FUNCTION</u> selects the window showing the buffer</br>
before reading any value from the minibuffer; for example, when</br>
asking a `yes-or-no-p' question.</br>
</br>
This runs the hook `temp-buffer-window-setup-hook' before <u>BODY</u>,</br>
with the specified buffer temporarily current.  It runs the hook</br>
`temp-buffer-window-show-hook' after displaying the buffer, with</br>
that buffer temporarily current, and the window that was used to</br>
display it temporarily selected.</br>
</br>
This construct is similar to `with-output-to-temp-buffer' but,</br>
neither runs `temp-buffer-setup-hook' which usually puts the</br>
buffer in Help mode, nor `temp-buffer-show-function' (the <u>ACTION</u></br>
argument replaces this).
