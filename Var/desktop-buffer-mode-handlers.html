---
title: "desktop-buffer-mode-handlers"
layout: doc
---
<strong>desktop-buffer-mode-handlers</strong> is a variable defined in `<code>desktop.el</code>'.</br>
Its value is shown <a href="#value">below</a>.</br>
<ul><li>  This variable may be risky if used as a file-local variable.</li></ul></br>
<strong id="documentation">Documentation:</strong></br>
Alist of major mode specific functions to restore a desktop buffer.</br>
Functions listed are called by `desktop-create-buffer' when `desktop-read'</br>
evaluates the desktop file.  List elements must have the form</br>
</br>
   (MAJOR-MODE . RESTORE-BUFFER-FUNCTION).</br>
</br>
Buffers with a major mode not specified here, are restored by the default</br>
handler `desktop-restore-file-buffer'.</br>
</br>
Handlers are called with argument list</br>
</br>
   (DESKTOP-BUFFER-FILE-NAME DESKTOP-BUFFER-NAME DESKTOP-BUFFER-MISC)</br>
</br>
Furthermore, they may use the following variables:</br>
</br>
   `desktop-file-version'</br>
   `desktop-buffer-major-mode'</br>
   `desktop-buffer-minor-modes'</br>
   `desktop-buffer-point'</br>
   `desktop-buffer-mark'</br>
   `desktop-buffer-read-only'</br>
   `desktop-buffer-locals'</br>
</br>
If a handler returns a buffer, then the saved mode settings</br>
and variable values for that buffer are copied into it.</br>
</br>
Modules that define a major mode that needs a special handler should contain</br>
code like</br>
</br>
   (defun foo-restore-desktop-buffer</br>
   ...</br>
   (add-to-list 'desktop-buffer-mode-handlers</br>
                '(foo-mode . foo-restore-desktop-buffer))</br>
</br>
Furthermore the major mode function must be autoloaded.</br>
</br>
<strong id="value">Value:</strong> <pre></br>
((mh-folder-mode . mh-restore-desktop-buffer)
 (vc-dir-mode . vc-dir-restore-desktop-buffer)
 (todo-mode . todo-restore-desktop-buffer)
 (rmail-mode . rmail-restore-desktop-buffer)
 (eww-mode . eww-restore-desktop)
 (doc-view-mode . doc-view-restore-desktop-buffer)
 (dired-mode . dired-restore-desktop-buffer)
 (Info-mode . Info-restore-desktop-buffer))
</pre></br>

