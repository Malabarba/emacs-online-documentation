<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us"><head><style type="text/css"> @import url('http://www.gnu.org/software/emacs/manual.css');</style></head><body style="padding:1rem;"><strong>tramp-chunksize</strong> is a variable defined in `<code>tramp.el</code>'.</br>
Its value is <pre>nil</pre></br>
</br>
<strong id="documentation">Documentation:</strong></br>
If non-nil, chunksize for sending input to local process.</br>
It is necessary only on systems which have a buggy `process-send-string'</br>
implementation.  The necessity, whether this variable must be set, can be</br>
checked via the following code:</br>
</br>
  (with-temp-buffer</br>
    (let* ((user "xxx") (host "yyy")</br>
           (init 0) (step 50)</br>
           (sent init) (received init))</br>
      (while (= sent received)</br>
        (setq sent (+ sent step))</br>
        (erase-buffer)</br>
        (let ((proc (start-process (buffer-name) (current-buffer)</br>
                                   "ssh" "-l" user host "wc" "-c")))</br>
          (when (memq (process-status proc) '(run open))</br>
            (process-send-string proc (make-string sent ?\ ))</br>
            (process-send-eof proc)</br>
            (process-send-eof proc))</br>
          (while (not (progn (goto-char (point-min))</br>
                             (re-search-forward "\\w+" (point-max) t)))</br>
            (accept-process-output proc 1))</br>
          (when (memq (process-status proc) '(run open))</br>
            (setq received (string-to-number (match-string 0)))</br>
            (delete-process proc)</br>
            (message "Bytes sent: %s\tBytes received: %s" sent received)</br>
            (sit-for 0))))</br>
      (if (> sent (+ init step))</br>
          (message "You should set `tramp-chunksize' to a maximum of %s"</br>
                   (- sent step))</br>
        (message "Test does not work")</br>
        (display-buffer (current-buffer))</br>
        (sit-for 30))))</br>
</br>
In the Emacs normally running Tramp, evaluate the above code</br>
(replace "xxx" and "yyy" by the remote user and host name,</br>
respectively).  You can do this, for example, by pasting it into</br>
the `*scratch*' buffer and then hitting C-j with the cursor after the</br>
last closing parenthesis.  Note that it works only if you have configured</br>
"ssh" to run without password query, see ssh-agent(1).</br>
</br>
You will see the number of bytes sent successfully to the remote host.</br>
If that number exceeds 1000, you can stop the execution by hitting</br>
C-g, because your Emacs is likely clean.</br>
</br>
When it is necessary to set `tramp-chunksize', you might consider to</br>
use an out-of-the-band method (like "scp") instead of an internal one</br>
(like "ssh"), because setting `tramp-chunksize' to non-nil decreases</br>
performance.</br>
</br>
If your Emacs is buggy, the code stops and gives you an indication</br>
about the value `tramp-chunksize' should be set.  Maybe you could just</br>
experiment a bit, e.g. changing the values of `init' and `step'</br>
in the third line of the code.</br>
</br>
Please raise a bug report via "M-x tramp-bug" if your system needs</br>
this variable to be set as well.</br>
</br>
You can customize this variable.<br/><br/><br/><br/><small>A courtesy of <a href="http://endlessparentheses.com/">Endless Parentheses</a>. Content under GPL as a part of GNU Emacs.</small></body></html>
